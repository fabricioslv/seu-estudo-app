servicesextractorsvestibularExtractorjsimportfsfromfs;importpdfParsefrompdfparse;classVestibularExtractorasyncextractprovaPathgabaritoPath=nulltryExtrairtextodaprovaconstprovaBuffer=fsreadFileSyncprovaPath;constprovaData=awaitpdfParseprovaBuffer;constprovaText=provaDatatext;Extrairgabaritosedisponvelletgabarito=null;ifgabaritoPathconstgabaritoBuffer=fsreadFileSyncgabaritoPath;constgabaritoData=awaitpdfParsegabaritoBuffer;gabarito=thisextractGabaritogabaritoDatatext;Extrairquestesconstquestoes=thisextractQuestoesprovaText;Associarrespostasdogabaritosquestesifgabaritoquestoeslength>0thisassociateGabaritoquestoesgabarito;returnquestoes;catcherrorconsoleerrorErronaextraodoVestibular:error;throwerror;extractQuestoestextconstquestoes=[;PadresdereconhecimentodequestesdevestibularesVestibularespodemterformatosvariadosesteumpadrocomumconstquestaoPattern=?:QuestoQUESTOQuestaoQUESTAO\s?:n[??\s\d13[\s[AZ\s\n\r[\s\S??=?:QuestoQUESTOQuestaoQUESTAO\s?:n[??\s\d13gi;letmatch;whilematch=questaoPatternexectext==nullconst[numeroconteudo=match;ExtrairenunciadoantesdasalternativasconstenunciadoMatch=conteudomatch??=?:\n\s[AE\s:?\ss;constenunciado=enunciadoMatch?enunciadoMatch[1trim:conteudotrim;Extrairalternativasconstalternativas=;constalternativasPattern=\n\s[AE\s:?\s[\n??=\n[AEg;letaltMatch;whilealtMatch=alternativasPatternexecconteudo==nullalternativas[altMatch[1=altMatch[2trim;questoespushnumero:parseIntnumeroenunciadoalternativasmateria:thisdeterminarMateriaenunciadoano:thisextractAnotext;returnquestoes;extractGabaritotextPadroparaextrairgabaritopodevariardependendodoformatodogabaritoconstgabarito=;constpattern=\d\s[\:\s[AEgi;letmatch;whilematch=patternexectext==nullconstnumero=parseIntmatch[1;constresposta=match[2;gabarito[numero=resposta;returngabarito;associateGabaritoquestoesgabaritoforconstquestaoofquestoesifgabarito[questaonumeroquestaorespostacorreta=gabarito[questaonumero;extractAnotextTentarextrairanodovestibulardotextoconstanoPattern=\d4[\dg;constanos=[;letmatch;whilematch=anoPatternexectext==nullanospushparseIntmatch[1;Retornaroanomaisprovvelomaiscomumnosltimos20anosconstcurrentYear=newDategetFullYear;constrecentYears=anosfilterano=>ano>=currentYear20ano<=currentYear;ifrecentYearslength>0Retornaoanomaiscomumnosrecentesconstcounts=;recentYearsforEachano=>counts[ano=counts[ano01;returnparseIntObjectkeyscountsreduceab=>counts[a>counts[b?a:b;returncurrentYear;PadrodeterminarMateriaenunciadoAnlisebaseadaempalavraschavenoenunciadoconstenunciadoLower=enunciadotoLowerCase;constmateriaKeywords=LinguagenseCdigos:[literaturalinguagemgramticaportugustextoautorobrafiguradelinguagemfunodalinguagemCinciasHumanas:[histriageografiasociologiafilosofiapolticasociedadeculturaeconomiarevoluocolonizaobrasilimperialismoglobalizaoiluminismoCinciasdaNatureza:[fsicaqumicabiologiatomoreaoclulaforaenergiacarbonodnaecossistemaMatemtica:[matemticaequaofunogeometrialgebranmeroprobabilidadeestatsticaSociologia:[sociedadeculturaclassesocialpolticainstituiopoder;Verificarcadamatriaforconst[materiakeywordsofObjectentriesmateriaKeywordsforconstkeywordofkeywordsifenunciadoLowerincludeskeywordreturnmateria;returnNoclassificada;exportdefaultnewVestibularExtractor;